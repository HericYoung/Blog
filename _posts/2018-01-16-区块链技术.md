---
layout: post
title: 区块链技术
description: 买不起比特币，看下它跑也行
category: Programming
tags: []
image: 
    feature: blockchain.jpg
---

&ensp;&ensp;&ensp;&ensp;本文意在进行区块链相关知识的简单介绍，学习与探讨，无权威性，内容大多自行总结自网络内容或相关书籍，如有错误欢迎指正。针对不同阅读对象，特意将文章内容分为两部分，第一部分为比特币的通俗介绍，不涉及到底层技术原理，算是简单科普。第二部分对区块链所涉及到的各种技术进行比较深入的描述和探讨。

[1.非专业部分，简介比特币与区块链](#ForChildren)<br/>
[2.关于区块链的技术详解](#Pro)

# 1.非专业部分，简介比特币与区块链 {#ForChildren}
&ensp;&ensp;&ensp;&ensp;比特币是`中本聪（化名）`在2008提出的一种虚拟的`数字货币`，它的本质是一种`分布式的点对点网络系统`。

&ensp;&ensp;&ensp;&ensp;与传统货币相比，比特币完全是虚拟的，其实是连代表比特币的虚拟物品都没有，比特币不是网络里面的某一串代码或者其他什么。

&ensp;&ensp;&ensp;&ensp;比特币是存在于`交易记录`中，比如你有一个比特币，其实是因为比特币的`账本`中记载着“你有一个比特币”。(其实这也是其他货币的本质，`可信性`，货币首先要被人们所承认，它才有价值，如中国不承认日元，所以日元在中国并无直接的使用价值。在比特币的系统里面就是这个账本，人们承认这个账本，也就承认其中交易记录的内容，也就承认“你有一个比特币”了。)

&ensp;&ensp;&ensp;&ensp;功能上，比特币与其他货币所具有的功能基本一致，如买卖商品，贷款汇款，兑换成其他货币。对于持有者，拥有的其实是比特币的`控制权的密钥`，用该密钥解锁就可以进行交易活动。

&ensp;&ensp;&ensp;&ensp;最重要的内容来了。

&ensp;&ensp;&ensp;&ensp;`分布式`，意味着`去中心化`，比特币的交易不需要一个管理中心(像使用支付宝的交易过程就需要负责支付宝的公司进行管理)。在比特币这个系统里面，任意双方可以直接进行交易，无需第三方干涉。

&ensp;&ensp;&ensp;&ensp;每个人都有一个公共账本，这个账本上的内容是`同步`的，即同一时间点每个人的账本上的内容几乎都是相同的（也有不同的情况，后面详细说明）。该账本上记录的就是比特币的`所有的交易记录`，没错，所有全部的交易记录(根据网上的信息，在2015年10月份的时候，该账本的大小约为45GB)，这些数据的结构是`一条链`，链上每一个结就是一个`数据块`，每一个数据块中存取的信息有该`块的编号，上一个数据块的编号，该次交易的内容`等等（为方便理解简化描述，实际上复杂很多）。这个就是传说中的 ***区块链技术***，比特币这个系统所使用的核心技术。
![](http://os738issp.bkt.clouddn.com/bitcoin.png)

&ensp;&ensp;&ensp;&ensp;虽然每个人手里都有一份账本，但不是谁都可以随意修改或增加其中的内容的，否则整个系统就全乱套了。区块链中的`信息同步`技术决定了少数人无法自行篡改账本的内容，`密码学`的设计确保货币流通各个环节安全性。

&ensp;&ensp;&ensp;&ensp;当系统中产生一笔新的`交易`时（比如我向系统请求，将我的一个比特币转移给你），理应就要在这条链上增加一个`新的区块`，而这份工作，只能有一个人来做，这时系统就会向所有人广播，并出一道数学题给大家，谁先做出这道题，就可以获得这份`写新区块`的工作。当已经有一个人确认获得这份工作时，其他还在争取的人就可以停止了。而这道数学题目前没有针对的算法去计算，只能暴力尝试，比如从1开始尝试，不对就尝试2，再到3......因为只能暴力计算，所以电脑的计算能力越好，抢到这份工作的概率就越大。

&ensp;&ensp;&ensp;&ensp;凭什么我算死算活就只是为了抢这份记账的工作？因为，每个抢到这份工作的人，系统就会`奖励`你一定的比特币，最开始的时候是50个，这50个比特币就是`凭空产生`的，就好像中央银行刚印出来一张50元的新人民币，那么人民币的总额就多了50元，在这里比特币的总额就多了50个。这个奖励的数额每4年就会减半，目前是12.5个，到2140年将达到`2100万`个的总量上限。

&ensp;&ensp;&ensp;&ensp;这个抢工作的过程就是所谓的 ***“挖矿”***。

&ensp;&ensp;&ensp;&ensp;还有一种比较复杂的情况（有需要再详述），会导致账本这条链出现`分支`，即同时有两个甚至更多的同编号的区块想要加入到链中，而且暂时无法确认哪个区块才是合法的，比特币这个系统就有一个针对性规则，先任由这几条分支继续发展，谁先增加到`6`个区块就成为合法的链，然后其他的分支就会被舍弃掉。并且，由于挖矿时系统出的那道数学题的难道非常大，将新区块的产生速度控制在了平均每约10分钟一个，所以，比特币的交易不能实时确认，必须等待至少一个小时。

&ensp;&ensp;&ensp;&ensp;非战斗人员看到这里就好了，乖。

---

# 2.关于区块链的技术详解 {#Pro}

&ensp;&ensp;&ensp;&ensp;狭义来讲，区块链是一种按照`时间`顺序将数据区块以顺序相连的方式组合成的一种`链式数据结构`， 并以`密码学`方式保证的不可篡改和不可伪造的`分布式账本`。

&ensp;&ensp;&ensp;&ensp;广义来讲，区块链技术是利用`块链式数据结构`来验证与存储数据、利用`分布式节点共识算法`来生成和更新数据、利用`密码学`的方式保证数据传输和访问的安全、利用由自动化脚本代码组成的智能合约来编程和操作数据的一种全新的`分布式基础架构与计算范式`。

&ensp;&ensp;&ensp;&ensp;2008 年 10 月 31 日，化名 Satoshi Nakamoto （中本聪）的人提出了比特币的设计白皮书（最早见于 metzdowd 邮件列表），并在 2009 年公开了最初的实现代码，第一个比特币是 `2009 年 1 月 3 日 18:15:05` 生成。但真正流行起来还是在 2010 年后的事情。其官方网站是 bitcoin。

---

## 分布式系统核心问题

### 对关键技术的思考
#### 密码学技术

&ensp;&ensp;&ensp;&ensp;需要密码学来解决的问题
- 防止交易记录被篡改
- 证明交易方的身份
- 保护交易双方的隐私


---
#### 分布式共识
&ensp;&ensp;&ensp;&ensp;核心问题：如何解决某个变更在网络中是一致的，是被大家承认的，同时这个信息是被确定的，不可推翻的。

---
#### 处理性能
&ensp;&ensp;&ensp;&ensp;如何提高交易的吞吐量，同时降低交易的确认延迟。

&ensp;&ensp;&ensp;&ensp;实际上，很大程度上取决于单个节点的处理能力。高性能、安全、稳定性、硬件辅助加解密能力，都将是考察节点性能的核心要素。

---
#### 扩展性
&ensp;&ensp;&ensp;&ensp;网络中每个参与维护的核心节点都要保持一份完整的存储，并且进行智能合约的处理。因此，整个网络的总存储和计算能力，取决于单个节点。甚至当网络中节点数过多时，可能会因为一致性的达成过程延迟降低整个网络的性能。尤其在公有网络中，由于大量低质量处理节点的存在问题将更明显。

---
#### 数据库和存储系统
&ensp;&ensp;&ensp;&ensp;区块链网络中的块信息需要写到数据库中进行存储。
---

#### 可集成性
&ensp;&ensp;&ensp;&ensp;基于区块链的新业务将与已有的中心化系统共存，其中存在如何共存，如何分工，如何传递彼此的业务交易等问题。
---

#### 其他一些具体的运营问题

---

未完待续





